{
  "note": "Alternative version using control_history table instead of setpoints table",
  "targets_alternative": [
    {
      "format": "time_series",
      "rawSql": "SELECT \n  timestamp AS \"time\",\n  'Temp Setpoint - Back' AS metric,\n  setpoint AS value\nFROM control_history\nWHERE location = 'Flower Room' \n  AND cluster = 'back'\n  AND setpoint IS NOT NULL\n  AND timestamp >= $__timeFrom()\n  AND timestamp <= $__timeTo()\nORDER BY timestamp",
      "refId": "B",
      "description": "Temperature setpoint from control_history (Back)"
    },
    {
      "format": "time_series",
      "rawSql": "SELECT \n  timestamp AS \"time\",\n  'Temp Setpoint - Front' AS metric,\n  setpoint AS value\nFROM control_history\nWHERE location = 'Flower Room' \n  AND cluster = 'front'\n  AND setpoint IS NOT NULL\n  AND timestamp >= $__timeFrom()\n  AND timestamp <= $__timeTo()\nORDER BY timestamp",
      "refId": "B2",
      "description": "Temperature setpoint from control_history (Front)"
    },
    {
      "format": "time_series",
      "rawSql": "SELECT \n  timestamp AS \"time\",\n  'VPD Setpoint - Back' AS metric,\n  setpoint AS value\nFROM control_history\nWHERE location = 'Flower Room' \n  AND cluster = 'back'\n  AND setpoint IS NOT NULL\n  AND timestamp >= $__timeFrom()\n  AND timestamp <= $__timeTo()\nORDER BY timestamp",
      "refId": "C",
      "description": "VPD setpoint from control_history (Back) - Note: control_history may not have VPD, only temperature setpoints"
    }
  ],
  "instructions": "Replace the B and C queries in your panel with these if the setpoints table doesn't work. Note: control_history only records setpoints when control actions occur, so there may be gaps."
}

